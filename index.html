<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>>_ pr0 Tag Statistiken</title>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
<link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="jsonParse.min.js"></script>
<script src="stats.js"></script>
<h1>
<span>pr0gramm</span> Tag Statistiken
</h1>
<h2>
v. 0.3
</h2>
<div id="mid-row">
<form action="" method="get">
<fieldset>
<input type="radio" id="tags" class="radio" name="type" value="tags" checked><label for="tags">Tags</label>
<input type="radio" id="user" class="radio" name="type" value="user"><label for="user">User</label>
</fieldset>
<span id="search_submit">
<span id="search">
<input type="text" name="search" maxlength="256" name="input" placeholder=" wörk, kevin, kadse, kefer, etc." autocomplete="off">
<input type="hidden" name="search">
<span id="tag_container">
</span>
</span>
<span style="float:left">
<input type="submit" value="Tags suchen">
</span>
</span>
</form>
</div>
<!--<script> //Script noch sehr experimentell. Cha0s du kannst mir gerne mit den <span>s um die Tags helfen :)
var position=0;
var top=0;
var left=0;
var inputs =  []; // Array für Inputs momentan unbenutzt
var counter;	  // Globaler Counter für Tags im Suchfeld, soll nur max. 2 Tags beinhalten
$(document).ready(function(){ 
	pullInput = function(width) { // Funktion um das Suchfeld nach links zu verschieben, wenn ein Tag gelöscht wird
		tagsWidth;
		$("#tag_container span").each(function() 
		{
			tagsWidth += $(this).width(); 
		}); // Ermittelt die Gesamtbreite aller Tags
		alert(tagsWidth);
		var newLeft = tagsWidth - width;
		alert(newLeft);
		$("input[type='text']").css("left", newLeft+"px")
	}
  	$("input[type='text']").keypress(function(e)
	{ 
		var key= e.charCode || e.keyCode; // e.keyCode als Fallback für Mozilla Firefox
  		if (key == 44) // Wenn , (Komma) gedrückt wird
      	{
			if(window.position==0)
			{
				window.position = $('#search').position();
				window.top = position.top - 3;
				window.left = position.left + 3;
			}
			var input = $("input[type='text']").val();
			inputs.push(input);
			searchbox = $("input[type='text']").position();
			searchbox.left += 5;
			tagsWidth=0;
			$('#tag_container').append("<span class='tag'><span>"+input+"&nbsp;&nbsp;</span><a href='#' title='Removing tag' onClick='$(this).parent().remove();pullInput( $(this).parent().width());alert('tag width' + $(this).parent().width());'>x</a></span>");
			$("#tag_container span").each(function() 
			{ 
				tagsWidth += $(this).width(); 
			});
			$('input[type="hidden"]').val($(this).text());
			var searchbox_newPos = $("#tag_container span").width();
			$("input[type='text']").css("left", tagsWidth+"px");
			$('input[type="hidden"]').val($("input[type='text']").val());
			$("input[type='text']").val("");
  	    }
	});
});
</script>-->
<div id="stats"></div> 
<script>
function gup( name ) { name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]"); var regexS = "[\\?&]"+name+"=([^&#]*)"; var regex = new RegExp( regexS ); var results = regex.exec( window.location.href ); if( results == null ) return null; else return results[1]; }
var query = gup("search");
var url = 'http://www.corsproxy.com/pr0gramm.com/api/items/get?tags=' + query;  
source = $.get(url, function(data) {
	callback = JSON.parse(data);
	alert(callback.items[1].up);
	$('#stats').append(generateStats(callback));
});
</script>
<br/><footer>
<a href="/pr0gramm/technik/">Wie berechnen wir diese Werte?</a>
</footer>
</body>
</html>


